![](https://upload-images.jianshu.io/upload_images/2829694-8d80389416deefc4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

## 前言

我们社区陆续会将顾毅（**Netflix 增长黑客，《iOS 面试之道》作者，ACE 职业健身教练。**）的 Swift 算法题题解整理为文字版以方便大家学习与阅读。

LeetCode 算法到目前我们已经更新了 80 期，我们会保持更新时间和进度（**周一、周三、周五早上 9:00 发布**），每期的内容不多，我们希望大家可以在上班路上阅读，长久积累会有很大提升。

不积跬步，无以至千里；不积小流，无以成江海，Swift社区 伴你前行。**如果大家有建议和意见欢迎在文末留言，我们会尽力满足大家的需求。**

> 难度水平：中等

## 1. 描述

已知存在一个按非降序排列的整数数组 `nums` ，数组中的值不必互不相同。

在传递给函数之前，`nums` 在预先未知的某个下标 `k`（`0 <= k < nums.length`）上进行了 **旋转** ，使数组变为 `[nums[k], nums[k+1], ..., nums[n-1], nums[0], nums[1], ..., nums[k-1]]`（下标 **从 0 开始** 计数）。例如， `[0,1,2,4,4,4,5,6,6,7]` 在下标 `5` 处经旋转后可能变为 `[4,5,6,6,7,0,1,2,4,4]` 。

给你 **旋转后** 的数组 `nums` 和一个整数 `target` ，请你编写一个函数来判断给定的目标值是否存在于数组中。如果 `nums` 中存在这个目标值 `target` ，则返回 `true` ，否则返回 `false` 。

你必须尽可能减少整个操作步骤。

## 2. 示例

**示例 1**

```
输入：nums = [2,5,6,0,0,1,2], target = 0
输出：true
```

**示例 2**

```
输入：nums = [2,5,6,0,0,1,2], target = 3
输出：false
```

**约束条件：**

- `1 <= nums.length <= 5000`
- `-10^4 <= nums[i] <= 10^4`
- 题目数据保证 `nums` 在预先未知的某个下标上进行了旋转
- `-10^4 <= target <= 10^4`

**进阶：**

* 这是 `搜索旋转排序数组` 的延伸题目，本题中的 `nums`  可能包含重复元素。
* 这会影响到程序的时间复杂度吗？会有怎样的影响，为什么？

## 3. 答案

```swift
class SearchInRotatedSortedArrayII {
    func search(nums: [Int], _ target: Int) -> Bool {
        var left = 0
        var right = nums.count - 1
        var mid = 0
        
        while left <= right {
            mid = (right - left) / 2 + left
            
            if nums[mid] == target {
                return true
            }
            
            if nums[mid] > nums[left] {
                if nums[mid] > target && target >= nums[left] {
                    right = mid - 1
                } else {
                    left = mid + 1
                }
            } else if nums[mid] < nums[left]{
                if nums[mid] < target && target <= nums[right] {
                    left = mid + 1
                } else {
                    right = mid - 1
                }
            } else {
                left += 1
            }
        }
        
        return false
    }
}
```

* 主要思想：二分查找，检查左或右是否排序，然后在部分中查找，如果重复则跳转。
* 时间复杂度： O(logn)
* 空间复杂度： O(1)

该算法题解的仓库：[LeetCode-Swift](https://github.com/soapyigu/LeetCode-Swift "LeetCode-Swift")

点击前往 [LeetCode](https://leetcode.com/problems/search-in-rotated-sorted-array-ii/ "LeetCode") 练习

## 关于我们

公众号是由 Swift 爱好者共同维护，我们会分享以 Swift 实战、SwiftUI、Swift 基础为核心的技术内容，也整理收集优秀的学习资料。欢迎关注公众号：**Swift社区**，后台点击进群，联系我们获取更多内容。

<img width="500" alt="Swift社区" src="https://user-images.githubusercontent.com/24238160/132703149-34121c6c-fd18-491c-a697-58a0fabf3060.png">
